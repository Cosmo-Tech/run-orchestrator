{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Run Template Orchestrator","text":"<p>This repository contains the new Run Template Orchestrator used in the latest Cosmotech Solutions</p>"},{"location":"#installation","title":"Installation","text":"<p>You need to add the orchestrator to the environment you want to use it on.</p> <p>The following guide will suppose you have a CosmoTech Project called <code>MyProject</code> which is in the folder <code>~/MyProject</code></p> <p>It will also suppose you have a build version of the CosmoTech SDK in the folder <code>~/Cosmotech/Studio</code></p> <p>Create a virtual environment and add dependencies (in bash)</p> <pre><code># First move to your project folder\ncd ~/MyProject\n# Next create and activate a venv (here .venv)\npython -m venv .venv\nsource .venv/bin/activate\n# Update your python path with the bindings from the sdk\nexport PYTHONPATH=$PYTHONPATH:~/Cosmotech/Studio/lib/python/site-packages\n# Add the local wrappers for your solution to the python path\nexport PYTHONPATH=$PYTHONPATH:~/MyProject/Generated/Build/Wrapping:~/MyProject/Generated/Build/Lib\n# Finally install the dependencies for your project (they should be in code/requirements.txt)\npip install -r code/requirements.txt\n</code></pre> Note <p>If you use the Cosmotech CLI <code>csmcli</code> you can replace the use of the <code>PYTHONPATH</code> environment variable by calls to <code>csm exec</code></p> <p>After all those commands you environment should be ready for a test, but first let's install the repository</p> Install from sourcesInstall using Pypi <p>Install the orchestrator from git sources</p> <pre><code>pip install git+ssh://git@github.com/Cosmo-Tech/run-orchestrator.git\n</code></pre> <p>Install the orchestrator from local sources</p> <pre><code>git clone ssh://git@github.com/Cosmo-Tech/run-orchestrator.git\npip install ./run-orchestrator\n</code></pre> <p>Install using pip</p> <pre><code>pip install cosmotech-run-orchestrator\n</code></pre> <p>After installation a few commands are made available, documentation for each is available on the commands documentation page</p> <p>Autocompletion</p> <p>Run the following command <pre><code>_CSM_RUN_ORCHESTRATOR_COMPLETE=bash_source csm-run-orchestrator &gt; ~/.csm-run-orchestrator-complete.bash\n</code></pre> then add the following line at the end of your <code>.bashrc</code> file <pre><code>. ~/.csm-run-orchestrator-complete.bash\n</code></pre></p>"},{"location":"License/","title":"License","text":"<p>Copyright - 2023 - 2023 - Cosmo Tech</p> <p>You are authorized to use this Cosmo Tech software following the execution of a specific agreement with Cosmo Tech or with an authorized licensee of Cosmo Tech.</p> <p>Accordingly you should refer to this specific agreement for the purpose of the extent of the use that is permitted. This use shall mainly consist in using, displaying and executing the Cosmo Tech software for your own needs.</p> <p>Except otherwise provided in the above-mentioned specific agreement: - you are not allowed to use this Cosmo Tech software for commercial purpose or to redistribute it without prior authorization from Cosmo Tech; - you are not allowed to copy, duplicate, modify, adapt and translate this Cosmo Tech software except as authorized under section L122-6-1 of the French Intellectual Property Code or specifically under the specific agreement with Cosmo Tech; - you must not remove this notice or any mention related to the copyright of Cosmo Tech;</p> <p>This Cosmo Tech software is provided 'as is', without any express or implied warranty towards the users.</p> <p>Any software generated through the use of this Cosmo Tech software shall be your own property to the extent this software does not contain any part of Cosmo Tech software source code.</p>"},{"location":"commands/","title":"Commands","text":"<p>The following commands are made available to you after installation of the orchestrator</p> <p> Download scenario data</p> <p>A script allowing to download dataset and parameters from a scenario</p> <p> Data downloader</p> <p> Download Cloud based Steps</p> <p>A script used to download Run Template Handlers sourced in the cloud using the Cosmotech API</p> <p> Download Cloud Steps</p> <p> Run step</p> <p>A script to run Steps from a Run Template</p> <p> Run steps</p> <p> Send Simulation Data to ADX</p> <p>A script to send Simulation input data (Datasets/Parameters) to Azure Data Explorer</p> <p> Simulation to ADX</p> <p> Orchestrator</p> <p>The main CosmoTech Orchestrator command</p> <p> Orchestrator</p> <p> Legacy generator</p> <p>A helper command to generate new run template json files from the Cosmotech API old format</p> <p> Legacy generator</p> <p> Parameter folder initialization</p> <p>A helper command to initialize Parameters folder for local runs</p> <p> Parameter Initialization</p>"},{"location":"commands/download_cloud_steps/","title":"Download Steps from cloud","text":"<p>Command help</p> <pre><code>&gt; csm-run-orchestrator fetch-cloud-steps --help\n\n Usage: csm-run-orchestrator fetch-cloud-steps [OPTIONS]                                                                \n\n Uses environment variables to download cloud based Template steps Requires a valid Azure connection either with:       \n\n  \u2022 The AZ cli command: az login                                                                                        \n  \u2022 A triplet of env var AZURE_TENANT_ID, AZURE_CLIENT_ID, AZURE_CLIENT_SECRET                                          \n\n\u256d\u2500 OPTIONS \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256e\n\u2502 *  --organization-id    o-##########         The id of an organization in the cosmotech api                          \u2502\n\u2502                                              ENV: CSM_ORGANIZATION_ID                                                \u2502\n\u2502                                              [required]                                                              \u2502\n\u2502 *  --workspace-id       w-##########         The id of a solution in the cosmotech api                               \u2502\n\u2502                                              ENV: CSM_WORKSPACE_ID                                                   \u2502\n\u2502                                              [required]                                                              \u2502\n\u2502 *  --run-template-id    NAME                 The name of the run template in the cosmotech api                       \u2502\n\u2502                                              ENV: CSM_RUN_TEMPLATE_ID                                                \u2502\n\u2502                                              [required]                                                              \u2502\n\u2502 *  --handler-list       HANDLER,...,HANDLER  A list of handlers to download (comma separated)                        \u2502\n\u2502                                              ENV: CSM_CONTAINER_MODE                                                 \u2502\n\u2502                                              [required]                                                              \u2502\n\u2502 *  --api-url            URL                  The url to a Cosmotech API                                              \u2502\n\u2502                                              ENV: CSM_API_URL                                                        \u2502\n\u2502                                              [required]                                                              \u2502\n\u2502 *  --api-scope          URI                  The identification scope of a Cosmotech API                             \u2502\n\u2502                                              ENV: CSM_API_SCOPE                                                      \u2502\n\u2502                                              [required]                                                              \u2502\n\u2502    --web-help                                Open the web documentation                                              \u2502\n\u2502    --help                                    Show this message and exit.                                             \u2502\n\u2570\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256f\n</code></pre>"},{"location":"commands/legacy_json_generator/","title":"Generate legacy run template json file","text":"<p>Help command</p> <pre><code>&gt; csm-run-orchestrator gen-from-legacy --help\n\n Usage: csm-run-orchestrator gen-from-legacy [OPTIONS] COMMAND [ARGS]...                                                \n\n Base command for the json generator using legacy files                                                                 \n Check the help of the sub commands for more information:                                                               \n\n  \u2022 cloud requires access to a fully deployed solution                                                                  \n  \u2022 solution requires a Solution.yaml file                                                                              \n\n\u256d\u2500 OPTIONS \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256e\n\u2502 --web-help      Open the web documentation                                                                           \u2502\n\u2502 --help          Show this message and exit.                                                                          \u2502\n\u2570\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256f\n\u256d\u2500 Commands \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256e\n\u2502 cloud     Connect to the cosmotech API to download a run template and generate an orchestrator file at OUTPUT        \u2502\n\u2502 solution  Read SOLUTION_FILE to get a RUN_TEMPLATE_ID and generate an orchestrator file at OUTPUT                    \u2502\n\u2570\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256f\n</code></pre> Generate json from Soluton.yaml<pre><code>&gt; csm-run-orchestrator gen-from-legacy solution --help\n\n Usage: csm-run-orchestrator gen-from-legacy solution [OPTIONS] SOLUTION_FILE                                           \n                                                      OUTPUT RUN_TEMPLATE_ID                                            \n\n Read SOLUTION_FILE to get a RUN_TEMPLATE_ID and generate an orchestrator file at OUTPUT                                \n\n\u256d\u2500 Arguments \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256e\n\u2502 *  SOLUTION_FILE      FILE  [required]                                                                               \u2502\n\u2502 *  OUTPUT             FILE  [required]                                                                               \u2502\n\u2502 *  RUN-TEMPLATE-ID    TEXT  [required]                                                                               \u2502\n\u2570\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256f\n\u256d\u2500 OPTIONS \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256e\n\u2502 --describe/--no-describe      Show a description of the generated template after generation                          \u2502\n\u2502                               DEFAULT: no-describe                                                                   \u2502\n\u2502 --web-help                    Open the web documentation                                                             \u2502\n\u2502 --help                        Show this message and exit.                                                            \u2502\n\u2570\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256f\n</code></pre> Generate json from CosmoTech API<pre><code>&gt; csm-run-orchestrator gen-from-legacy cloud --help\n\n Usage: csm-run-orchestrator gen-from-legacy cloud [OPTIONS] OUTPUT                                                     \n\n Connect to the cosmotech API to download a run template and generate an orchestrator file at OUTPUT                    \n\n\u256d\u2500 Arguments \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256e\n\u2502 *  OUTPUT    FILE  [required]                                                                                        \u2502\n\u2570\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256f\n\u256d\u2500 OPTIONS \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256e\n\u2502 *  --api-url                   URL           The url to a Cosmotech API                                              \u2502\n\u2502                                              ENV: CSM_API_URL                                                        \u2502\n\u2502                                              [required]                                                              \u2502\n\u2502 *  --api-scope                 URI           The identification scope of a Cosmotech API                             \u2502\n\u2502                                              ENV: CSM_API_SCOPE                                                      \u2502\n\u2502                                              [required]                                                              \u2502\n\u2502 *  --organization-id           o-##########  The id of an organization in the cosmotech api                          \u2502\n\u2502                                              ENV: CSM_ORGANIZATION_ID                                                \u2502\n\u2502                                              [required]                                                              \u2502\n\u2502 *  --workspace-id              w-##########  The id of a solution in the cosmotech api                               \u2502\n\u2502                                              ENV: CSM_WORKSPACE_ID                                                   \u2502\n\u2502                                              [required]                                                              \u2502\n\u2502 *  --run-template-id           NAME          The name of the run template in the cosmotech api                       \u2502\n\u2502                                              ENV: CSM_RUN_TEMPLATE_ID                                                \u2502\n\u2502                                              [required]                                                              \u2502\n\u2502    --describe/--no-describe                  Show a description of the generated template after generation           \u2502\n\u2502                                              DEFAULT: no-describe                                                    \u2502\n\u2502    --web-help                                Open the web documentation                                              \u2502\n\u2502    --help                                    Show this message and exit.                                             \u2502\n\u2570\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256f\n</code></pre>"},{"location":"commands/orchestrator/","title":"Orchestrator","text":"<p>Help command</p> <pre><code>&gt; csm-run-orchestrator orchestrator --help\n\n Usage: csm-run-orchestrator orchestrator [OPTIONS] TEMPLATE                                                            \n\n Runs the given TEMPLATE file                                                                                           \n Commands are run as subprocess using bash -c \"&lt;command&gt; &lt;arguments&gt;\".                                                  \n In case you are in a python venv, the venv is activated before any command is run.                                     \n\n\u256d\u2500 Arguments \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256e\n\u2502 *  TEMPLATE    FILE  [required]                                                                                      \u2502\n\u2570\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256f\n\u256d\u2500 OPTIONS \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256e\n\u2502 --dry-run/--no-dry-run          -n           Use dry-run mode                                                        \u2502\n\u2502                                              ENV: DRY_RUN                                                            \u2502\n\u2502                                              DEFAULT: no-dry-run                                                     \u2502\n\u2502 --display-env/--no-display-env               List all required environment variables and their documentation         \u2502\n\u2502                                              ENV: DISPLAY_ENVIRONMENT                                                \u2502\n\u2502                                              DEFAULT: no-display-env                                                 \u2502\n\u2502 --gen-env-target                    PATH     Generate a .env file with all env vars to be filed when display-env is  \u2502\n\u2502                                              called                                                                  \u2502\n\u2502                                              ENV: GENERATE_ENVIRONMENT                                               \u2502\n\u2502 --skip-step                         STEP_ID  Define a list of steps to be skipped during this run                    \u2502\n\u2502                                              ENV: CSM_SKIP_STEPS                                                     \u2502\n\u2502 --web-help                                   Open the web documentation                                              \u2502\n\u2502 --help                                       Show this message and exit.                                             \u2502\n\u2570\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256f\n</code></pre>"},{"location":"commands/orchestrator/#examples","title":"Examples","text":"JSON Schema <pre><code>{\n\"$schema\": \"https://json-schema.org/draft/2020-12/schema\",\n\"$id\": \"https://cosmotech.com/run_template.schema.json\",\n\"title\": \"Run Template\",\n\"description\": \"A run template description\",\n\"type\": \"object\",\n\"properties\": {\n\"commandTemplates\": {\n\"description\": \"A list of Commands Templates\",\n\"type\": \"array\",\n\"items\": {\n\"description\": \"A Command Template describe a single executable with default properties\",\n\"type\": \"object\",\n\"properties\": {\n\"id\": {\n\"type\": \"string\",\n\"description\": \"The Id of the Command Template\",\n\"pattern\": \"^\\\\S*$\"\n},\n\"command\": {\n\"type\": \"string\",\n\"description\": \"The root bash command necessary to execute the template\"\n},\n\"arguments\": {\n\"type\": \"array\",\n\"description\": \"The list of default arguments passed to the command\",\n\"items\": {\n\"type\": \"string\"\n}\n},\n\"environment\": {\n\"type\": \"object\",\n\"description\": \"The default list of Environment Variables required for the command\",\n\"patternProperties\": {\n\".+\": {\n\"$ref\": \"#/$defs/environmentVariable\"\n}\n},\n\"minProperties\": 1\n}\n},\n\"additionalProperties\": false,\n\"required\": [\n\"id\",\n\"command\"\n]\n}\n},\n\"steps\": {\n\"description\": \"A list of Steps descriptors\",\n\"type\": \"array\",\n\"items\": {\n\"description\": \"A Step is a single instance of a Command that is scheduled to be run, can use an existing command or define its own\",\n\"type\": \"object\",\n\"properties\": {\n\"id\": {\n\"type\": \"string\",\n\"description\": \"The Id of the Step\",\n\"pattern\": \"^\\\\S*$\"\n},\n\"commandId\": {\n\"type\": \"string\",\n\"description\": \"An Id for an existing command\"\n},\n\"command\": {\n\"type\": \"string\",\n\"description\": \"The root bash command necessary to execute the command\"\n},\n\"arguments\": {\n\"type\": \"array\",\n\"description\": \"The list of arguments passed to the command (replace the default one)\",\n\"items\": {\n\"type\": \"string\"\n}\n},\n\"environment\": {\n\"type\": \"object\",\n\"description\": \"The list of Environment Variables defined for the command (replace the default one)\",\n\"patternProperties\": {\n\".+\": {\n\"$ref\": \"#/$defs/environmentVariable\"\n}\n},\n\"minProperties\": 1\n},\n\"precedents\": {\n\"type\": \"array\",\n\"description\": \"A list of steps that have to be run before this one\",\n\"items\": {\n\"type\": \"string\"\n}\n}\n},\n\"additionalProperties\": false,\n\"oneOf\": [\n{\n\"required\": [\n\"id\",\n\"command\"\n]\n},\n{\n\"required\": [\n\"id\",\n\"commandId\"\n]\n}\n]\n}\n}\n},\n\"required\": [\n\"steps\"\n],\n\"$defs\": {\n\"environmentVariable\": {\n\"type\": \"object\",\n\"description\": \"A environment variable descriptor\",\n\"properties\": {\n\"defaultValue\": {\n\"type\": \"string\",\n\"description\": \"The default value of the required variable, if not set, the variable has to be set in the system\"\n},\n\"value\": {\n\"type\": \"string\",\n\"description\": \"The effective value of the required variable, will override any system value\"\n},\n\"description\": {\n\"type\": \"string\",\n\"description\": \"A description of the required Environment Variable for documentation reasons\"\n}\n},\n\"additionalProperties\": false\n}\n}\n}\n</code></pre> Example json file simple_example.json<pre><code>{\n\"commandTemplates\": [\n{\n\"id\": \"TEMPLATE_ID\",\n\"command\": \"echo\",\n\"arguments\": [\n\"list\",\n\"of\",\n\"arguments\",\n\"$ENV_VALUE\"\n],\n\"environment\": {\n\"ENV_VALUE\": {\n\"defaultValue\": \"DEFAULT\",\n\"description\": \"An environment variable with a default value\"\n}\n}\n}\n],\n\"steps\": [\n{\n\"id\": \"UseTemplate\",\n\"commandId\": \"TEMPLATE_ID\"\n},\n{\n\"id\": \"OverrideTemplate\",\n\"commandId\": \"TEMPLATE_ID\",\n\"arguments\": [\n\"Added\",\n\"arguments\"\n],\n\"environment\": {\n\"ENV_VALUE\": {\n\"value\": \"OVERRIDE\",\n\"description\": \"An environment variable with a forced value\"\n}\n},\n\"precedents\": [\n\"UseTemplate\"\n]\n},\n{\n\"id\": \"NewCommand\",\n\"command\": \"echo\",\n\"arguments\": [\n\"$NO_EXIST\"\n],\n\"environment\": {\n\"NO_EXIST\": {\n\"description\": \"An environment variable with no value\"\n}\n},\n\"precedents\": [\n\"OverrideTemplate\"\n]\n}\n]\n}\n</code></pre> Run command with json file <p>The following code won't run by itself because <code>example.json</code> requires the EnvVar <code>NO_EXIST</code> to be set by the system run without complementary EnvVar<pre><code>csm-run-orchestrator orchestrator example.json\n</code></pre> You could do the following to have it work set EnvVar with export<pre><code>export NO_EXIST=\"This value exists\"\ncsm-run-orchestrator orchestrator example.json\n</code></pre> The following works too run with EnvVar for run only<pre><code>NO_EXIST=\"This value exists\" csm-run-orchestrator orchestrator example.json\n</code></pre></p>"},{"location":"commands/parameters_generator/","title":"Initialize Parameters Folder","text":"<p>Help command</p> <pre><code>&gt; csm-run-orchestrator init-parameters --help\n\n Usage: csm-run-orchestrator init-parameters [OPTIONS] COMMAND [ARGS]...                                                \n\n Base command to initialize parameter folders                                                                           \n Will create:                                                                                                           \n\n  \u2022 A parameters.json/parameters.csv in the folder with all parameters                                                  \n  \u2022 A folder per %DATASETID% datasets with the name of the parameter                                                    \n    Check the help of the sub commands for more information:                                                            \n  \u2022 cloud requires access to a fully deployed solution                                                                  \n  \u2022 solution requires a Solution.yaml file                                                                              \n\n\u256d\u2500 OPTIONS \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256e\n\u2502 --web-help      Open the web documentation                                                                           \u2502\n\u2502 --help          Show this message and exit.                                                                          \u2502\n\u2570\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256f\n\u256d\u2500 Commands \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256e\n\u2502 cloud     Initialize parameter folder for given run template from CosmoTech cloud API                                \u2502\n\u2502 solution  Initialize parameter folder for given run template from a Solution yaml file                               \u2502\n\u2570\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256f\n</code></pre> Initialize using Soluton.yaml<pre><code>&gt; csm-run-orchestrator init-parameters solution --help\n\n Usage: csm-run-orchestrator init-parameters solution [OPTIONS] SOLUTION_FILE                                           \n                                                      OUTPUT_FOLDER                                                     \n                                                      RUN_TEMPLATE_ID                                                   \n\n Initialize parameter folder for given run template from a Solution yaml file                                           \n\n\u256d\u2500 Arguments \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256e\n\u2502 *  SOLUTION_FILE      FILE  [required]                                                                               \u2502\n\u2502 *  OUTPUT_FOLDER      PATH  [required]                                                                               \u2502\n\u2502 *  RUN_TEMPLATE_ID    TEXT  [required]                                                                               \u2502\n\u2570\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256f\n\u256d\u2500 OPTIONS \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256e\n\u2502 --write-json/--no-write-json      Toggle writing of parameters in json format                                        \u2502\n\u2502                                   ENV: WRITE_JSON                                                                    \u2502\n\u2502                                   DEFAULT: no-write-json                                                             \u2502\n\u2502 --write-csv/--no-write-csv        Toggle writing of parameters in csv format                                         \u2502\n\u2502                                   ENV: WRITE_CSV                                                                     \u2502\n\u2502                                   DEFAULT: write-csv                                                                 \u2502\n\u2502 --web-help                        Open the web documentation                                                         \u2502\n\u2502 --help                            Show this message and exit.                                                        \u2502\n\u2570\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256f\n</code></pre> Initialize using CosmoTech API<pre><code>&gt; csm-run-orchestrator init-parameters cloud --help\n\n Usage: csm-run-orchestrator init-parameters cloud [OPTIONS] OUTPUT_FOLDER                                              \n\n Initialize parameter folder for given run template from CosmoTech cloud API                                            \n\n\u256d\u2500 Arguments \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256e\n\u2502 *  OUTPUT_FOLDER    PATH  [required]                                                                                 \u2502\n\u2570\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256f\n\u256d\u2500 OPTIONS \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256e\n\u2502 *  --api-url                       URL           The url to a Cosmotech API                                          \u2502\n\u2502                                                  ENV: CSM_API_URL                                                    \u2502\n\u2502                                                  [required]                                                          \u2502\n\u2502 *  --api-scope                     URI           The identification scope of a Cosmotech API                         \u2502\n\u2502                                                  ENV: CSM_API_SCOPE                                                  \u2502\n\u2502                                                  [required]                                                          \u2502\n\u2502 *  --organization-id               o-##########  The id of an organization in the cosmotech api                      \u2502\n\u2502                                                  ENV: CSM_ORGANIZATION_ID                                            \u2502\n\u2502                                                  [required]                                                          \u2502\n\u2502 *  --workspace-id                  w-##########  The id of a solution in the cosmotech api                           \u2502\n\u2502                                                  ENV: CSM_WORKSPACE_ID                                               \u2502\n\u2502                                                  [required]                                                          \u2502\n\u2502 *  --run-template-id               NAME          The name of the run template in the cosmotech api                   \u2502\n\u2502                                                  ENV: CSM_RUN_TEMPLATE_ID                                            \u2502\n\u2502                                                  [required]                                                          \u2502\n\u2502    --write-json/--no-write-json                  Toggle writing of parameters in json format                         \u2502\n\u2502                                                  ENV: WRITE_JSON                                                     \u2502\n\u2502                                                  DEFAULT: no-write-json                                              \u2502\n\u2502    --write-csv/--no-write-csv                    Toggle writing of parameters in csv format                          \u2502\n\u2502                                                  ENV: WRITE_CSV                                                      \u2502\n\u2502                                                  DEFAULT: write-csv                                                  \u2502\n\u2502    --web-help                                    Open the web documentation                                          \u2502\n\u2502    --help                                        Show this message and exit.                                         \u2502\n\u2570\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256f\n</code></pre>"},{"location":"commands/run_step/","title":"Run Template Step","text":"<p>Help command</p> <pre><code>&gt; csm-run-orchestrator run-step --help\n\n Usage: csm-run-orchestrator run-step [OPTIONS]                                                                         \n\n Runs a list of steps of a run template in a CosmoTech project Known limitations:                                       \n\n  \u2022 The step MUST contain an executable main.py file                                                                    \n  \u2022 The engine step requires to set the env var CSM_SIMULATION if you have a run without a python engine                \n\n\u256d\u2500 OPTIONS \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256e\n\u2502 *  --template    TEXT  refer to a folder contained in code/run_templates                                             \u2502\n\u2502                        ENV: CSM_RUN_TEMPLATE_ID                                                                      \u2502\n\u2502                        [required]                                                                                    \u2502\n\u2502    --steps       TEXT  A list of Steps definer in the TEMPLATE folder that will be executed (comma-separated).       \u2502\n\u2502                        Defaults to CSMDOCKER equivalent to parameters_handler,validator,prerun,engine,postrun (the   \u2502\n\u2502                        legacy order)                                                                                 \u2502\n\u2502                        ENV: CSM_CONTAINER_MODE                                                                       \u2502\n\u2502                        DEFAULT: CSMDOCKER                                                                            \u2502\n\u2502    --web-help          Open the web documentation                                                                    \u2502\n\u2502    --help              Show this message and exit.                                                                   \u2502\n\u2570\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256f\n</code></pre>"},{"location":"commands/scenario_data_downloader/","title":"Scenario Data Download","text":"<p>Help command</p> <pre><code>&gt; csm-run-orchestrator fetch-scenariorun-data --help\n\n Usage: csm-run-orchestrator fetch-scenariorun-data [OPTIONS]                                                           \n\n Uses environment variables to call the download_scenario_data function Requires a valid Azure connection either with:  \n\n  \u2022 The AZ cli command: az login                                                                                        \n  \u2022 A triplet of env var AZURE_TENANT_ID, AZURE_CLIENT_ID, AZURE_CLIENT_SECRET                                          \n\n Requires env var CSM_API_URL     The URL to a Cosmotech API                                                            \n Requires env var CSM_API_SCOPE   The identification scope of a Cosmotech API                                           \n\n\u256d\u2500 OPTIONS \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256e\n\u2502 *  --organization-id                     o-##########  The id of an organization in the cosmotech api                \u2502\n\u2502                                                        ENV: CSM_ORGANIZATION_ID                                      \u2502\n\u2502                                                        [required]                                                    \u2502\n\u2502 *  --workspace-id                        w-##########  The id of a workspace in the cosmotech api                    \u2502\n\u2502                                                        ENV: CSM_WORKSPACE_ID                                         \u2502\n\u2502                                                        [required]                                                    \u2502\n\u2502 *  --scenario-id                         s-##########  The id of a scenario in the cosmotech api                     \u2502\n\u2502                                                        ENV: CSM_SCENARIO_ID                                          \u2502\n\u2502                                                        [required]                                                    \u2502\n\u2502 *  --dataset-absolute-path               PATH          A local folder to store the main dataset content              \u2502\n\u2502                                                        ENV: CSM_DATASET_ABSOLUTE_PATH                                \u2502\n\u2502                                                        [required]                                                    \u2502\n\u2502 *  --parameters-absolute-path            PATH          A local folder to store the parameters content                \u2502\n\u2502                                                        ENV: CSM_PARAMETERS_ABSOLUTE_PATH                             \u2502\n\u2502                                                        [required]                                                    \u2502\n\u2502    --write-json/--no-write-json                        Toggle writing of parameters in json format                   \u2502\n\u2502                                                        ENV: WRITE_JSON                                               \u2502\n\u2502                                                        DEFAULT: no-write-json                                        \u2502\n\u2502    --write-csv/--no-write-csv                          Toggle writing of parameters in csv format                    \u2502\n\u2502                                                        ENV: WRITE_CSV                                                \u2502\n\u2502                                                        DEFAULT: write-csv                                            \u2502\n\u2502    --fetch-dataset/--no-fetch-dataset                  Toggle fetching datasets                                      \u2502\n\u2502                                                        ENV: FETCH_DATASET                                            \u2502\n\u2502                                                        DEFAULT: fetch-dataset                                        \u2502\n\u2502    --web-help                                          Open the web documentation                                    \u2502\n\u2502    --help                                              Show this message and exit.                                   \u2502\n\u2570\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256f\n</code></pre>"},{"location":"commands/simulation_to_adx/","title":"Simulation to ADX connector","text":"<p>Help command</p> <pre><code>&gt; csm-run-orchestrator send-to-adx --help\n\n Usage: csm-run-orchestrator send-to-adx [OPTIONS]                                                                      \n\n Uses environment variables to send content of CSV files to ADX Requires a valid Azure connection either with:          \n\n  \u2022 The AZ cli command: az login                                                                                        \n  \u2022 A triplet of env var AZURE_TENANT_ID, AZURE_CLIENT_ID, AZURE_CLIENT_SECRET                                          \n\n\u256d\u2500 OPTIONS \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256e\n\u2502 *  --dataset-absolute-path                   PATH  A local folder to store the main dataset content                  \u2502\n\u2502                                                    ENV: CSM_DATASET_ABSOLUTE_PATH                                    \u2502\n\u2502                                                    [required]                                                        \u2502\n\u2502 *  --parameters-absolute-path                PATH  A local folder to store the parameters content                    \u2502\n\u2502                                                    ENV: CSM_PARAMETERS_ABSOLUTE_PATH                                 \u2502\n\u2502                                                    [required]                                                        \u2502\n\u2502 *  --simulation-id                           UUID  the Simulation Id to add to records                               \u2502\n\u2502                                                    ENV: CSM_SIMULATION_ID                                            \u2502\n\u2502                                                    [required]                                                        \u2502\n\u2502 *  --adx-uri                                 URI   the ADX cluster path (URI info can be found into ADX cluster      \u2502\n\u2502                                                    page)                                                             \u2502\n\u2502                                                    ENV: AZURE_DATA_EXPLORER_RESOURCE_URI                             \u2502\n\u2502                                                    [required]                                                        \u2502\n\u2502 *  --adx-ingest-uri                          URI   The ADX cluster ingest path (URI info can be found into ADX       \u2502\n\u2502                                                    cluster page)                                                     \u2502\n\u2502                                                    ENV: AZURE_DATA_EXPLORER_RESOURCE_INGEST_URI                      \u2502\n\u2502                                                    [required]                                                        \u2502\n\u2502 *  --database-name                           NAME  The targeted database name                                        \u2502\n\u2502                                                    ENV: AZURE_DATA_EXPLORER_DATABASE_NAME                            \u2502\n\u2502                                                    [required]                                                        \u2502\n\u2502    --send-parameters/--no-send-parameters          whether or not to send parameters (parameters path is mandatory   \u2502\n\u2502                                                    then)                                                             \u2502\n\u2502                                                    ENV: CSM_SEND_DATAWAREHOUSE_PARAMETERS                            \u2502\n\u2502                                                    DEFAULT: no-send-parameters                                       \u2502\n\u2502    --send-datasets/--no-send-datasets              whether or not to send datasets (parameters path is mandatory     \u2502\n\u2502                                                    then)                                                             \u2502\n\u2502                                                    ENV: CSM_SEND_DATAWAREHOUSE_DATASETS                              \u2502\n\u2502                                                    DEFAULT: no-send-datasets                                         \u2502\n\u2502    --wait/--no-wait                                Toggle waiting for the ingestion results                          \u2502\n\u2502                                                    ENV: WAIT_FOR_INGESTION                                           \u2502\n\u2502                                                    DEFAULT: no-wait                                                  \u2502\n\u2502    --web-help                                      Open the web documentation                                        \u2502\n\u2502    --help                                          Show this message and exit.                                       \u2502\n\u2570\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256f\n</code></pre>"},{"location":"tutorial/","title":"Tutorials","text":"<p>A list of tutorials to start getting used to the run-orchestrator</p> <p> My first orchestration</p> <p>A first look at how the orchestrator works, how to create commands and play around with environment</p> <p> My first orchestration</p>"},{"location":"tutorial/first/","title":"My first orchestration","text":"<p>Objective</p> <ul> <li>Set up an orchestration project</li> <li>Create a few scripts to organize</li> <li>Create an orchestration file to run our scripts</li> </ul>"},{"location":"tutorial/first/#setting-up-our-project","title":"Setting up our project","text":"<p>During this tutorial we will start from a clean installation of <code>csm-run-orchestrator</code> and work our way to an orchestrated solution.</p> Set up our project<pre><code># First we will create a new folder for our project\nmkdir MyFirstOrchestrationProject\ncd MyFirstOrchestrationProject\n# Now that we are in our project folder we will set up the orchestrator using a python venv\n# We create the venv in the folder `.venv`\npython -m venv .venv\n# We activate the venv\n. .venv/bin/activate\n# Now we can install the orchestrator using pip\npip install cosmotech-run-orchestrator\n# We can check that our installation worked by running the orchestrator help\ncsm-run-orchestrator --help\n</code></pre> <p>After all that our project is ready to start</p>"},{"location":"tutorial/first/#creating-our-first-scripts","title":"Creating our first scripts","text":"<p>In this part we will create 2 simple python script that will interact by using a common file, the first script should write the first N members of the Fibonacci sequence on the file, and the second one will display them.</p> FibonacciDisplay fibonacci.py<pre><code>import argparse\n\nparser = argparse.ArgumentParser(description=\"Fibonacci printer\")\nparser.add_argument(\"n\",\n                    type=int,\n                    help=\"The max rank of the fibonacci sequence to write\")\nparser.add_argument(\"filename\",\n                    type=argparse.FileType('w'),\n                    help=\"The file to write to\")\n\n\ndef fibonacci_sequence(n: int = 0):\n    a, b = 0, 1\n    for _ in range(n):\n        yield a\n        a, b = b, a + b\n\n\nif __name__ == \"__main__\":\n    args = parser.parse_args()\n    with args.filename as f:\n        for v in fibonacci_sequence(args.n):\n            f.write(f\"{v}\\n\")\n</code></pre> display_file.py<pre><code>import argparse\n\nparser = argparse.ArgumentParser(description=\"File printer\")\nparser.add_argument(\"filename\",\n                    type=argparse.FileType('r'),\n                    help=\"The file to print\")\n\nif __name__ == \"__main__\":\n    args = parser.parse_args()\n\n    with args.filename as f:\n        for v in f.readlines():\n            print(v.strip())\n</code></pre> <p>Let's try our scripts</p> <p>Running those two files is easy <pre><code>python fibonacci.py 10 fib.txt\npython display_file.py fib.txt\n</code></pre> This should display the following lines <pre><code>0\n1\n1\n2\n3\n5\n8\n13\n21\n34\n</code></pre></p>"},{"location":"tutorial/first/#write-a-first-orchestration","title":"Write a first orchestration","text":"<p>Now that we have our two files, we want to create an orchestration file to run them.</p> <p>An orchestration file is a json file following the given JSON schema</p> JSON-schema <p>The following schema can be impressive, but we will go through most of it in the next points. JSON-schema<pre><code>{\n\"$schema\": \"https://json-schema.org/draft/2020-12/schema\",\n\"$id\": \"https://cosmotech.com/run_template.schema.json\",\n\"title\": \"Run Template\",\n\"description\": \"A run template description\",\n\"type\": \"object\",\n\"properties\": {\n\"commandTemplates\": {\n\"description\": \"A list of Commands Templates\",\n\"type\": \"array\",\n\"items\": {\n\"description\": \"A Command Template describe a single executable with default properties\",\n\"type\": \"object\",\n\"properties\": {\n\"id\": {\n\"type\": \"string\",\n\"description\": \"The Id of the Command Template\",\n\"pattern\": \"^\\\\S*$\"\n},\n\"command\": {\n\"type\": \"string\",\n\"description\": \"The root bash command necessary to execute the template\"\n},\n\"arguments\": {\n\"type\": \"array\",\n\"description\": \"The list of default arguments passed to the command\",\n\"items\": {\n\"type\": \"string\"\n}\n},\n\"environment\": {\n\"type\": \"object\",\n\"description\": \"The default list of Environment Variables required for the command\",\n\"patternProperties\": {\n\".+\": {\n\"$ref\": \"#/$defs/environmentVariable\"\n}\n},\n\"minProperties\": 1\n}\n},\n\"additionalProperties\": false,\n\"required\": [\n\"id\",\n\"command\"\n]\n}\n},\n\"steps\": {\n\"description\": \"A list of Steps descriptors\",\n\"type\": \"array\",\n\"items\": {\n\"description\": \"A Step is a single instance of a Command that is scheduled to be run, can use an existing command or define its own\",\n\"type\": \"object\",\n\"properties\": {\n\"id\": {\n\"type\": \"string\",\n\"description\": \"The Id of the Step\",\n\"pattern\": \"^\\\\S*$\"\n},\n\"commandId\": {\n\"type\": \"string\",\n\"description\": \"An Id for an existing command\"\n},\n\"command\": {\n\"type\": \"string\",\n\"description\": \"The root bash command necessary to execute the command\"\n},\n\"arguments\": {\n\"type\": \"array\",\n\"description\": \"The list of arguments passed to the command (replace the default one)\",\n\"items\": {\n\"type\": \"string\"\n}\n},\n\"environment\": {\n\"type\": \"object\",\n\"description\": \"The list of Environment Variables defined for the command (replace the default one)\",\n\"patternProperties\": {\n\".+\": {\n\"$ref\": \"#/$defs/environmentVariable\"\n}\n},\n\"minProperties\": 1\n},\n\"precedents\": {\n\"type\": \"array\",\n\"description\": \"A list of steps that have to be run before this one\",\n\"items\": {\n\"type\": \"string\"\n}\n}\n},\n\"additionalProperties\": false,\n\"oneOf\": [\n{\n\"required\": [\n\"id\",\n\"command\"\n]\n},\n{\n\"required\": [\n\"id\",\n\"commandId\"\n]\n}\n]\n}\n}\n},\n\"required\": [\n\"steps\"\n],\n\"$defs\": {\n\"environmentVariable\": {\n\"type\": \"object\",\n\"description\": \"A environment variable descriptor\",\n\"properties\": {\n\"defaultValue\": {\n\"type\": \"string\",\n\"description\": \"The default value of the required variable, if not set, the variable has to be set in the system\"\n},\n\"value\": {\n\"type\": \"string\",\n\"description\": \"The effective value of the required variable, will override any system value\"\n},\n\"description\": {\n\"type\": \"string\",\n\"description\": \"A description of the required Environment Variable for documentation reasons\"\n}\n},\n\"additionalProperties\": false\n}\n}\n}\n</code></pre></p>"},{"location":"tutorial/first/#the-first-step","title":"The first step","text":"<p>In the schema we can see that it is divided in two parts : - the CommandTemplate - the Step</p> <p>For this first orchestration file we will only use steps.</p> <p>Let's take a look at an example step</p> simple_step.json<pre><code>{\n\"steps\": [\n{\n\"id\": \"echo-foo-bar\",\n\"command\": \"echo\",\n\"arguments\": [ \"foo\", \"bar\" ]\n}\n]\n}\n</code></pre> <p>In this minimal file we can see one <code>step</code> with the id <code>echo-foo-bar</code>  that runs the command <code>echo</code> with the arguments <code>foo</code> and <code>bar</code>.</p> <p>This orchestration file is valid following the JSON schema as we have at least 1 element in <code>steps</code>, and the element as at least an <code>id</code> and a <code>command</code></p> <p>We can run this orchestration file with the following command :</p> run simple_step.json<pre><code>csm-run-orchestrator orchestrator simple_step.json\n# [YYYY/MM/DD-HH:mm:SS] INFO     ===      Run     ===\n# [YYYY/MM/DD-HH:mm:SS] INFO     Starting step echo-foo-bar\n# foo bar\n# [YYYY/MM/DD-HH:mm:SS] INFO     Done running step echo-foo-bar\n# [YYYY/MM/DD-HH:mm:SS] INFO     ===     Results    ===\n# [YYYY/MM/DD-HH:mm:SS] INFO     Step echo-foo-bar\n#                                Command: echo foo bar\n#                                Status: Done \n</code></pre> <p>On line 4 we can see the result of the command <code>echo foo bar</code> which is defined in the step.</p> <p>Now using this basis we will write our commands in an orchestration file using the same options as the previous example</p> <p>Let's try our scripts as an orchestration file</p> <p>run.json<pre><code>{\n\"steps\": [\n{\n\"id\": \"run-fibo\",\n\"command\": \"python\",\n\"arguments\": [ \"fibonacci.py\", \"10\", \"fib.txt\" ]\n},\n{\n\"id\": \"run-display\",\n\"command\": \"python\",\n\"arguments\": [ \"display_file.py\", \"fib.txt\" ],\n\"precedents\": [ \"run-fibo\" ]\n}\n]\n}\n</code></pre> Now we can run our file using the orchestrator run our first orchestration<pre><code>csm-run-orchestrator orchestrator run.json\n</code></pre></p> <p>In the example <code>run.json</code> you can see on line 12 the apparition of the key-words <code>precedents</code>,  it is used to order our operations.</p> <p>Here by setting the step <code>run-fibo</code> as a precedent to the step <code>run-display</code>  we ensure that the first script will run before the second.</p> <p>And now we created a simple example of orchestration file to run some of our scripts. In the next tutorial we will look at how to use CommandTemplates to re-use possibly complex commands, and Environment Variables to change the effect of our commands.</p>"}]}