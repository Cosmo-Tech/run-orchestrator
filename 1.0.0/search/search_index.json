{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Run Template Orchestrator","text":"<p>This repository contains the new Run Template Orchestrator used in the latest Cosmotech Solutions</p>"},{"location":"#installation","title":"Installation","text":"<p>You need to add the orchestrator to the environment you want to use it on.</p> <p>The following guide will suppose you have a CosmoTech Project called <code>MyProject</code> which is in the folder <code>~/MyProject</code></p> <p>It will also suppose you have a build version of the CosmoTech SDK in the folder <code>~/Cosmotech/Studio</code></p> <p>Create a virtual environment and add dependencies (in bash)</p> <pre><code># First move to your project folder\ncd ~/MyProject\n# Next create and activate a venv (here .venv)\npython -m venv .venv\nsource .venv/bin/activate\n# Update your python path with the bindings from the sdk\nexport PYTHONPATH=$PYTHONPATH:~/Cosmotech/Studio/lib/python/site-packages\n# Add the local wrappers for your solution to the python path\nexport PYTHONPATH=$PYTHONPATH:~/MyProject/Generated/Build/Wrapping:~/MyProject/Generated/Build/Lib\n# Finally install the dependencies for your project (they should be in code/requirements.txt)\npip install -r code/requirements.txt\n</code></pre> Note <p>If you use the Cosmotech CLI <code>csmcli</code> you can replace the use of the <code>PYTHONPATH</code> environment variable by calls to <code>csm exec</code></p> <p>After all those commands you environment should be ready for a test, but first let's install the repository</p> <p>Install the orchestrator</p> <pre><code>pip install git+ssh://git@github.com/Cosmo-Tech/run_template_orchestrator.git\n</code></pre> <p>After installation a few commands are made available, documentation for each is available on the scripts documentation page</p>"},{"location":"scripts/","title":"Console Scripts","text":"<p>The following console scripts are made available to you after installation of the orchestrator</p> <p> Download scenario data</p> <p>A script allowing to download dataset and parameters from a scenario</p> <p> Data downloader</p> <p> Download Cloud based Steps</p> <p>A script used to download Run Template Handlers sourced in the cloud using the Cosmotech API</p> <p> Download Cloud Steps</p> <p> Run step</p> <p>A script to run Steps from a Run Template</p> <p> Run steps</p> <p> Send Simulation Data to ADX</p> <p>A script to send Simulation input data (Datasets/Parameters) to Azure Data Explorer</p> <p> Simulation to ADX</p>"},{"location":"scripts/download_cloud_steps/","title":"Download Steps from cloud","text":"<p>Command help</p> <pre><code>&gt; cosmotech_download_cloud_steps --help\n\n Usage: cosmotech_download_cloud_steps [OPTIONS]                                                                        \n\n Uses environment variables to download cloud based Template steps Requires a valid Azure connection either with:       \n\n  \u2022 The AZ cli command: az login                                                                                        \n  \u2022 A triplet of env var AZURE_TENANT_ID, AZURE_CLIENT_ID, AZURE_CLIENT_SECRET                                          \n\n\u256d\u2500 Options \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256e\n\u2502    --log-level          LVL                  Either CRITICAL, ERROR, WARNING, INFO or DEBUG                          \u2502\n\u2502                                              [env var: LOG_LEVEL]                                                    \u2502\n\u2502 *  --organization-id    o-##########         The id of an organization in the cosmotech api                          \u2502\n\u2502                                              [env var: CSM_ORGANIZATION_ID]                                          \u2502\n\u2502                                              [required]                                                              \u2502\n\u2502 *  --workspace-id       w-##########         The id of a solution in the cosmotech api                               \u2502\n\u2502                                              [env var: CSM_WORKSPACE_ID]                                             \u2502\n\u2502                                              [required]                                                              \u2502\n\u2502 *  --run-template-id    NAME                 The name of the run template in the cosmotech api                       \u2502\n\u2502                                              [env var: CSM_RUN_TEMPLATE_ID]                                          \u2502\n\u2502                                              [required]                                                              \u2502\n\u2502 *  --handler-list       HANDLER,...,HANDLER  A list of handlers to download (comma separated)                        \u2502\n\u2502                                              [env var: CSM_CONTAINER_MODE]                                           \u2502\n\u2502                                              [required]                                                              \u2502\n\u2502 *  --api-url            URL                  The url to a Cosmotech API                                              \u2502\n\u2502                                              [env var: CSM_API_URL]                                                  \u2502\n\u2502                                              [required]                                                              \u2502\n\u2502 *  --api-scope          URI                  The identification scope of a Cosmotech API                             \u2502\n\u2502                                              [env var: CSM_API_SCOPE]                                                \u2502\n\u2502                                              [required]                                                              \u2502\n\u2502    --help                                    Show this message and exit.                                             \u2502\n\u2570\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256f\n</code></pre>"},{"location":"scripts/run_step/","title":"Run Template Step","text":"<p>Help command</p> <pre><code>&gt; cosmotech_run_step --help\n\n Usage: cosmotech_run_step [OPTIONS] TEMPLATE [STEPS]...                                                                \n\n Runs a list of steps of a run template in a CosmoTech project                                                          \n\n  \u2022 TEMPLATE refer to a folder contained in code/run_templates                                                          \n  \u2022 STEPS is a list of Steps definer in the TEMPLATE folder that will be executed                                       \n     \u2022 defaults to CSMDOCKER which represent the legacy order: parameters_handler - validator - prerun - engine -       \n       postrun                                                                                                          \n\n Known limitations:                                                                                                     \n\n  \u2022 The template MUST contain an executable main.py file                                                                \n  \u2022 The engine step requires to set the env var CSM_SIMULATION if you have a run without a python engine                \n\n\u256d\u2500 Arguments \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256e\n\u2502 *  TEMPLATE    TEXT  [required]                                                                                      \u2502\n\u2502    STEPS       TEXT                                                                                                  \u2502\n\u2570\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256f\n\u256d\u2500 Options \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256e\n\u2502 --log-level    LVL  Either CRITICAL, ERROR, WARNING, INFO or DEBUG                                                   \u2502\n\u2502                     [env var: LOG_LEVEL]                                                                             \u2502\n\u2502 --help              Show this message and exit.                                                                      \u2502\n\u2570\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256f\n</code></pre>"},{"location":"scripts/scenario_data_downloader/","title":"Scenario Data Download","text":"<p>Help command</p> <pre><code>&gt; cosmotech_scenario_downloader --help\n\n Usage: cosmotech_scenario_downloader [OPTIONS]                                                                         \n\n Uses environment variables to call the download_scenario_data function Requires a valid Azure connection either with:  \n\n  \u2022 The AZ cli command: az login                                                                                        \n  \u2022 A triplet of env var AZURE_TENANT_ID, AZURE_CLIENT_ID, AZURE_CLIENT_SECRET                                          \n\n Requires env var CSM_API_URL     The URL to a Cosmotech API                                                            \n Requires env var CSM_API_SCOPE   The identification scope of a Cosmotech API                                           \n\n\u256d\u2500 Options \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256e\n\u2502 *  --organization-id               o-##########  The id of an organization in the cosmotech api                      \u2502\n\u2502                                                  [env var: CSM_ORGANIZATION_ID]                                      \u2502\n\u2502                                                  [required]                                                          \u2502\n\u2502 *  --workspace-id                  w-##########  The id of a workspace in the cosmotech api                          \u2502\n\u2502                                                  [env var: CSM_WORKSPACE_ID]                                         \u2502\n\u2502                                                  [required]                                                          \u2502\n\u2502 *  --scenario-id                   s-##########  The id of a scenario in the cosmotech api                           \u2502\n\u2502                                                  [env var: CSM_SCENARIO_ID]                                          \u2502\n\u2502                                                  [required]                                                          \u2502\n\u2502 *  --dataset-absolute-path         PATH          A local folder to store the main dataset content                    \u2502\n\u2502                                                  [env var: CSM_DATASET_ABSOLUTE_PATH]                                \u2502\n\u2502                                                  [required]                                                          \u2502\n\u2502 *  --parameters-absolute-path      PATH          A local folder to store the parameters content                      \u2502\n\u2502                                                  [env var: CSM_PARAMETERS_ABSOLUTE_PATH]                             \u2502\n\u2502                                                  [required]                                                          \u2502\n\u2502    --write-json/--no-write-json                  Toggle writing of parameters in json format                         \u2502\n\u2502                                                  [env var: WRITE_JSON]                                               \u2502\n\u2502    --write-csv/--no-write-csv                    Toggle writing of parameters in csv format                          \u2502\n\u2502                                                  [env var: WRITE_CSV]                                                \u2502\n\u2502    --log-level                     LVL           Either CRITICAL, ERROR, WARNING, INFO or DEBUG                      \u2502\n\u2502                                                  [env var: LOG_LEVEL]                                                \u2502\n\u2502    --help                                        Show this message and exit.                                         \u2502\n\u2570\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256f\n</code></pre>"},{"location":"scripts/simulation_to_adx/","title":"Simulation to ADX connector","text":"<p>Help command</p> <pre><code>&gt; cosmotech_simulation_to_adx_connector --help\n\n Usage: cosmotech_simulation_to_adx_connector [OPTIONS]                                                                 \n\n Uses environment variables to send content of CSV files to ADX Requires a valid Azure connection either with:          \n\n  \u2022 The AZ cli command: az login                                                                                        \n  \u2022 A triplet of env var AZURE_TENANT_ID, AZURE_CLIENT_ID, AZURE_CLIENT_SECRET                                          \n\n\u256d\u2500 Options \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256e\n\u2502 *  --dataset-absolute-path                   PATH  A local folder to store the main dataset content                  \u2502\n\u2502                                                    [env var: CSM_DATASET_ABSOLUTE_PATH]                              \u2502\n\u2502                                                    [required]                                                        \u2502\n\u2502 *  --parameters-absolute-path                PATH  A local folder to store the parameters content                    \u2502\n\u2502                                                    [env var: CSM_PARAMETERS_ABSOLUTE_PATH]                           \u2502\n\u2502                                                    [required]                                                        \u2502\n\u2502 *  --simulation-id                           UUID  the Simulation Id to add to records                               \u2502\n\u2502                                                    [env var: CSM_SIMULATION_ID]                                      \u2502\n\u2502                                                    [required]                                                        \u2502\n\u2502 *  --adx-uri                                 URI   the ADX cluster path (URI info can be found into ADX cluster      \u2502\n\u2502                                                    page)                                                             \u2502\n\u2502                                                    [env var: AZURE_DATA_EXPLORER_RESOURCE_URI]                       \u2502\n\u2502                                                    [required]                                                        \u2502\n\u2502 *  --adx-ingest-uri                          URI   The ADX cluster ingest path (URI info can be found into ADX       \u2502\n\u2502                                                    cluster page)                                                     \u2502\n\u2502                                                    [env var: AZURE_DATA_EXPLORER_RESOURCE_INGEST_URI]                \u2502\n\u2502                                                    [required]                                                        \u2502\n\u2502 *  --database-name                           NAME  The targeted database name                                        \u2502\n\u2502                                                    [env var: AZURE_DATA_EXPLORER_DATABASE_NAME]                      \u2502\n\u2502                                                    [required]                                                        \u2502\n\u2502    --send-parameters/--no-send-parameters          whether or not to send parameters (parameters path is mandatory   \u2502\n\u2502                                                    then)                                                             \u2502\n\u2502                                                    [env var: CSM_SEND_DATAWAREHOUSE_PARAMETERS]                      \u2502\n\u2502    --send-datasets/--no-send-datasets              whether or not to send datasets (parameters path is mandatory     \u2502\n\u2502                                                    then)                                                             \u2502\n\u2502                                                    [env var: CSM_SEND_DATAWAREHOUSE_DATASETS]                        \u2502\n\u2502    --wait/--no-wait                                Toggle waiting for the ingestion results                          \u2502\n\u2502                                                    [env var: WAIT_FOR_INGESTION]                                     \u2502\n\u2502    --log-level                               LVL   Either CRITICAL, ERROR, WARNING, INFO or DEBUG                    \u2502\n\u2502                                                    [env var: LOG_LEVEL]                                              \u2502\n\u2502    --help                                          Show this message and exit.                                       \u2502\n\u2570\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256f\n</code></pre>"}]}